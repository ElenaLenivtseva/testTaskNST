let widthLine=100,widthOfYear,widthOfMonth,line=document.querySelectorAll(".test__line");function createTool(e,t,l,i){var o=document.createElement("div"),a=document.createElement("p"),s=document.createElement("p");o.classList.add("tooltip"),o.classList.add(t),a.classList.add("tooltip__month"),s.classList.add("tooltip__year"),a.innerText=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][l],s.innerText=i,o.appendChild(a),o.appendChild(s),e.appendChild(o)}function deleteTool(e){var t=e,e=e.querySelector(".tooltip");t.removeChild(e)}function createYears(l,i,o){for(let t=0;t<l.length;t++)for(let e=0;e<i;e++){var a=document.createElement("div");a.classList.add(o),l[t].appendChild(a)}}function setStyle(e,t){var l=document.querySelectorAll(e);for(let e=0;e<l.length;e++)l[e].style.width=t+"%"}function drawPoint(t,l,e,i){e=e.querySelector(".test__year[data-year='"+t+"']").getElementsByTagName("*")[l];e.style.position="relative",e.style.display="flex",e.style.alignItems="center";let o=document.createElement("div");if(o.classList.add("__point"),e.appendChild(o),800<window.innerWidth)i?(o.onmouseover=function(e){setTimeout(()=>{createTool(o,"tooltip--top",l,t)},200)},o.onmouseout=function(e){setTimeout(()=>{deleteTool(o)},200)}):(o.onmouseover=function(e){setTimeout(()=>{createTool(o,"tooltip--bottom",l,t)},200)},o.onmouseout=function(e){setTimeout(()=>{deleteTool(o)},200)});else if(window.innerWidth<800)if(i){let e=!1;o.addEventListener("click",function(){e=e?(setTimeout(()=>{deleteTool(o)},200),!1):(setTimeout(()=>{createTool(o,"tooltip--top",l,t)},200),!0)})}else{let e=!1;o.addEventListener("click",function(){e=e?(setTimeout(()=>{deleteTool(o)},200),!1):(setTimeout(()=>{createTool(o,"tooltip--bottom",l,t)},200),!0)})}}function fillDefault(e,t,l,i,o){var a=e.querySelector(".test__year[data-year='"+t+"']").getElementsByTagName("*");a[i];for(let e=i;e<a.length;e++)a[e].classList.add("__betweenPoint");var s=e.querySelector(".test__year[data-year='"+l+"']").getElementsByTagName("*");s[o];for(let e=0;e<o;e++)s[e].classList.add("__betweenPoint")}function searchFill(t,e,l){var i=t.getFullYear(),t=t.getMonth(),o=e.getFullYear(),a=e.getMonth(),s=o-i,e=a-t;if(drawPoint(i,t,l,"min"),drawPoint(o,a,l),1<s){for(let e=1;e<s;e++){var n=i+e,r=l.querySelector(".test__year[data-year='"+n+"']").getElementsByTagName("*");for(let e=0;e<r.length;e++)r[e].classList.add("__betweenPoint")}fillDefault(l,i,o,t,a)}else if(1==s)fillDefault(l,i,o,t,a);else if(0==s&&0<e){var d=l.querySelector(".test__year[data-year='"+i+"']").getElementsByTagName("*");d[t],d[a];for(let e=t;e<a;e++)d[e].classList.add("__betweenPoint")}}function main(e,t,l,i){e=new Date(e),t=new Date(t),l=new Date(l),i=new Date(i);if(!(t<=e||l<e||t<i)){var o=e.getFullYear(),e=t.getFullYear(),a=(l.getFullYear(),i.getFullYear(),l.getMonth(),i.getMonth(),e-o),t=(createYears(line,1+a,"test__year"),setStyle(".test__year",widthOfYear=Math.round(widthLine/a)),document.querySelectorAll(".test__year"));createYears(t,12,"test__month");var s=document.querySelector(".test__time-bottom").querySelectorAll(".test__year"),t=document.querySelector(".test__time-top"),n=t.querySelectorAll(".test__year"),r=(s[0].firstChild.innerText=o,s[0].firstChild.style.textAlign="left",s[0].firstChild.classList.add("__title"),s[s.length-1]),d=n[n.length-1];r.firstChild.innerText=e,r.firstChild.classList.add("__title"),s[0].dataset.year=""+o,n[0].dataset.year=""+o,r.dataset.year=""+e,d.dataset.year=""+e;for(let e=1;e<s.length-1;e++)for(let e=1;e<a;e++)s[e].firstChild.innerText=o+e,s[e].firstChild.classList.add("__title"),s[e].dataset.year=""+(o+e),n[e].dataset.year=""+(o+e);for(let e=0;e<s.length;e++){var c=s[e].getElementsByTagName("*"),_=["фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"];for(let e=1;e<c.length;e++)c[e].innerText=_[e-1]}var m=r.getElementsByTagName("*");for(d.getElementsByTagName("*");1<m.length;)r.removeChild(r.lastChild),d.removeChild(d.lastChild);r.style.gridTemplateColumns="1fr",r.style.width="auto",d.style.gridTemplateColumns="1fr",d.style.width="auto",searchFill(l,i,t)}}main("2020-01-10","2023-11-20","2020-05-08","2021-09-10"),$(document).ready(function(){$(".test__time-top").slick({dots:!1,infinite:!1,asNavFor:".test__time-bottom"}),$(".test__time-bottom").slick({arrows:!1,dots:!1,infinite:!1,asNavFor:".test__time-top"})});const switcher=document.querySelector(".test__left"),sliderYearsSwitch=document.querySelector(".test__list-link-year"),sliderMonthSwitch=document.querySelector(".test__list-link-month"),sliderMonths=document.querySelectorAll(".test__month");function toggleActive(t){for(let e=0;e<t.length;e++)t[e].classList.toggle("__active")}switcher.addEventListener("click",e=>{e=e.target;console.log(e),e.classList.contains("test__list-link-month")&&(sliderYearsSwitch.classList.remove("__active"),e.classList.add("__active"),toggleActive(sliderMonths)),e.classList.contains("test__list-link-year")&&(sliderMonthSwitch.classList.remove("__active"),e.classList.add("__active"),toggleActive(sliderMonths))});